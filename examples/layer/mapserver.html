<!DOCTYPE html>
<html>
<head>
    <title>示例-叠加MapServer服务(使用注册地址)</title>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <link href="../../dist/GeoLMap.min.css" rel="stylesheet" />
    <script src="../../dist/GeoLMap.min.js"></script>
    <link href="../res/example.css" rel="stylesheet" />
</head>
<body>
    <div id="mapid"></div>
    <div class="leaflet-bar custom-button">
        geokey：<input id="geokey" value="" type="text" />
        <input id="drawpolygon" type="button" value="叠加" onclick="addHandler()">
    </div>
    <script>
        var map = new L.GeoMap('mapid', {
            zoom: 13
        });
        map.setView([31.578140, 120.309906], 11);

        var layer;
        addHandler = function () {
            if (layer)
                map.removeLayer(layer);
            layer = L.esri.dynamicMapLayer({
                url: 'http://localhost:8081/serviceaccess/service/arcgis/rest/services/wxcloud/enterprise/MapServer',
                opacity: 0.7,
                f: "image",
                geokey: document.getElementById("geokey").value
            }).addTo(map);
        }
    </script>
</body>
</html>