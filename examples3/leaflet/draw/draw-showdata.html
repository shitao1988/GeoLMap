<!DOCTYPE html>
<html>
<head>
    <title>示例-通过接口加载数据</title>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <script src="../../dist/jquery-1.11.1.min.js"></script>
    <link href="../../dist/GeoLMap.min.css" rel="stylesheet" />
    <script src="../../dist/GeoLMap.min.js"></script>
    <script>L.Canvas = true</script>
    <link href="../res/example.css" rel="stylesheet" />
</head>
<body>
    <div id="mapid"></div>
    <script>
        var map = new L.GeoMap('mapid', { zoom: 13 });

        L.esri.dynamicMapLayer({
            url: 'http://192.168.1.163:6080/arcgis/rest/services/JMD/MapServer',
            opacity: 0.7
        }).addTo(map);

        //window.PROXY = "../../dist/proxy/proxy.ashx?";
        //(function () {
        //    var _this = this;
        //    url = "../../data/jy_enterprise.js";

        //    var ajax = new L.Ajax();
        //    ajax.get(url, {}, true, this, success, function () {
        //        alert("数据请求失败");
        //    });
        //    function success(data) {
        //        if (data.code == 0) {
        //            alert("服务请求失败");
        //            return;
        //        }
        //        else {
        //            var heatpoints = [];
        //            for (var i = 0; i < data.result.length && i < 500; i++) {
        //                new L.Marker(new L.LatLng(data.result[i].y, data.result[i].x), { title: data.result[i].name }).bindPopup(data.result[i].name + "<br/>" + data.result[i].address).addTo(map);
        //            }
        //        }
        //    }
        //})();
        //map.setView([31.578140, 120.309906], 11);
    </script>
</body>
</html>